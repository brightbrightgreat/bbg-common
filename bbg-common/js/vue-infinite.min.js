!function(){var BBGInfiniteVue={};BBGInfiniteVue.install=function(Vue,options){Vue.mixin({mounted:function(){if(void 0!==this.archive&&!1===this.archive.mounted&&this.archive.pages>this.archive.page&&"string"==typeof this.archive.marker&&-1!==this.archive.base.indexOf("%#%")){var vue=this,archiveObserverEl=document.getElementById(this.archive.marker);if(this.archive.mounted=!0,archiveObserverEl){this.archive.offset=parseInt(this.archive.offset,10)||0;new IntersectionObserver(function(entries,archiveObserver){entries[0].isIntersecting&&vue.infiniteScroll(),!0===vue.infiniteDone&&(archiveObserver.unobserve(archiveObserverEl),archiveObserverEl.parentNode.removeChild(archiveObserverEl))},{root:null,rootMargin:this.archive.offset+"px",threshold:1}).observe(archiveObserverEl)}}}}),Vue.prototype.infiniteLock=!1,Vue.prototype.infiniteDone=!1,Vue.prototype.infiniteScroll=function(){if(!0===this.infiniteLock||!this.archive)return this.archive||(this.infiniteDone=!0),!1;if(this.infiniteLock=!0,this.archive.page++,this.archive.page>this.archive.pages)return this.infiniteDone=!0,!1;var url=this.archive.base.replace("%#%",this.archive.page),vue=this;this.$http.get(url).then(function(r){if(!r.ok)return vue.infiniteLock=!1,vue.infiniteDone=!0,!1;try{var el=document.createElement("html");el.innerHTML=r.body;var i,script=el.querySelector("#bbg-common-env");if(script){var json=JSON.parse(script.textContent);if(json.posts&&Array.isArray(json.posts)&&json.posts.length){for(i=0;i<json.posts.length;i++)vue.posts.push(json.posts[i]);return vue.infiniteLock=!1,!0}}return vue.infiniteLock=!1,vue.infiniteDone=!0,!1}catch(Ex){console.warn(Ex)}},function(r){vue.infiniteLock=!1,vue.infiniteDone=!0})}},"undefined"!=typeof window&&window.Vue&&window.Vue.use(BBGInfiniteVue)}();